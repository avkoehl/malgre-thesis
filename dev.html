<!DOCTYPE html>
<html>
<head>
  <title> Malgre Nous </title>
  <link rel="stylesheet" href="./style/leaflet.css"/>
  <link rel="stylesheet" href="./style/mystyle.css"/>
  <link rel="stylesheet" href="./style/MarkerCluster.css" />
  <link rel="stylesheet" href="./style/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="./style/layout.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oxygen">

  <script src="./scripts/leaflet.js"></script>
  <script src="./scripts/leaflet.edgebuffer.js"></script>
  <script src="./scripts/jquery-2.1.1.min.js"></script>
  <script src="./scripts/leaflet.markercluster-src.js"></script>
  <script src="./scripts/all.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.css">
  <script src="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.js"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

  <!--
  <style>
    html, body, #map{ width:100%; height:100%;} 
  </style>
  -->
</head>

<body style="margin: 0 auto"> 

  <!-- make this actual nav bar www.adam-bray.com/2017/02/17/easy-html-5-css-3-navigation-menu/ -->
  <ul class="malgre">
    <li class="malgre">  <a class="active" style="text-decoration: none" href="http://malgrenous.com/dev.html">Dev </a> </li> <!-- sources, files -->
  </ul>


  <div id="container" style="display: -webkit-flex; display:flex; width: 100vw; height:100vh; flex-direction:row">

	<div id="map" style="flex: 5; width: 80%; max-height:100vh"></div> <!-- Map -->

    	<div style="flex:1; max-height:100vh; width: 20%; color:white; background-color:#17729A; font-family:'Oxygen', sans-serif">
      	  <center><h3 style="padding:20px"> Malgre Nous </h3><center>
          <p style="padding:20px"> This is some text about the map you are looking at, make sure to use the control buttons in the top right corner when using this map </p>
          <center><button class="desc"> Show borders </button></center>
          <br>

          <center>
          <form>
          <input type="checkbox" id="1942" name="two"/>1942</br>
          <input type="checkbox" id="1943" name="three"/>1943</br>
          <input type="checkbox" id="1944" name="four"/>1944</br>
          <input type="checkbox" id="1945" name="five"/>1945</br>
          <input type="checkbox" id="All" name="all"/>All</br>
          </form>
          </center>

	</div> <!-- Side Bar -->

    </div> <!-- Flex Container -->


  

  <script>
  var map = L.map('map', {zoomControl: false}).setView([47.06, 19.94], 5);
  map.scrollWheelZoom.disable();
  var year = 1942;

    


  L.easyButton({
    id: 'UK',
    position:'topright',
    leafletClasses: true,
    states:[{
      stateName: 'to UK',
      onClick: function () {
        map.setView([55, -2], 5);
      },
      title: 'go to uk',
      icon: '<i class="material-icons">room</i>',
    }]
  }).addTo(map);

  L.easyButton({
    id: 'data',
    position:'topright',
    leafletClasses: true,
    states:[{
      stateName: 'Enter parameters',
      onClick: function () {
         alert('clicked');
        },
      title: 'enter options',
      icon: '<i class="material-icons">room</i>',
    }]
  }).addTo(map);




  L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	  attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	  subdomains: 'abcd',
	  maxZoom: 19,
    edgeBufferTiles: 2
  }).addTo(map);

  L.control.zoom({
    position:'topright'
  }).addTo(map);
 
  var MalgreNous = [{
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [28, 49]
    },
    "properties": {"date": "1942", "record": "1000", "city": "city", "country": "country"}
  },{
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [30, 49]
    },
    "properties": {"date": "1943", "record": "1001", "city": "city", "country": "country"}
  },{
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [32, 49]
    },
    "properties": {"date": "1944", "record": "1002", "city": "city", "country": "country"}
  },{
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [35, 49]
    },
    "properties": {"date": "1945", "record": "1003", "city": "city", "country": "country"}
  }];

  var geojsonMarkerOptions = {
    radius: 8,
    fillColor: "#ff7800",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
  };


  function onEachFeature (feature, layer) {
    var content = '<table>';
    if (feature.properties){
      for (var p in feature.properties) {
        content += '<tr><td>' + p + ': ' + '</td><td>' + feature.properties[p] + '</td></tr>';
      }
      layer.bindPopup(content);
    }
  }

  var myLayer = L.geoJson(false, {
    onEachFeature: onEachFeature,
    pointToLayer: function (feature, latlng) {
      return L.circleMarker(latlng, geojsonMarkerOptions)}
    });

 // for (i = 0; i < MalgreNous.length; ++i)
 // {
 //   if (MalgreNous[i].properties.date == year)
 //     myLayer.addData(MalgreNous[i]);
 // };

  document.getElementById('1942').onclick = function() 
  {
    if (document.forms[0].two.checked) {
      for (var i =0; i < MalgreNous.length; i++) {
        if (MalgreNous[i].properties.date === "1942") {
          myLayer.addData(MalgreNous[i]);
        }
      }
    }
    else if (!document.forms[0].two.checked) {
      myLayer.clearLayers();
    }
  };

  document.getElementById('1943').onclick = function() 
  {
    if (document.forms[0].three.checked) {
      for (var i =0; i < MalgreNous.length; i++) {
        if (MalgreNous[i].properties.date === "1943") {
          myLayer.addData(MalgreNous[i]);
        }
      }
    }
    else if (!document.forms[0].three.checked) {
      myLayer.clearLayers();
    }
  };

  document.getElementById('1944').onclick = function() 
  {
    if (document.forms[0].four.checked) {
      for (var i =0; i < MalgreNous.length; i++) {
        if (MalgreNous[i].properties.date === "1944") {
          myLayer.addData(MalgreNous[i]);
        }
      }
    }
    else if (!document.forms[0].four.checked) {
      myLayer.clearLayers();
    }
  };
  document.getElementById('1945').onclick = function() 
  {
    if (document.forms[0].five.checked) {
      for (var i =0; i < MalgreNous.length; i++) {
        if (MalgreNous[i].properties.date === "1945") {
          myLayer.addData(MalgreNous[i]);
        }
      }
    }
    else if (!document.forms[0].five.checked) {
      myLayer.clearLayers();
    }
  };
  document.getElementById('All').onclick = function() 
  {
    if (document.forms[0].all.checked) {
      for (var i =0; i < MalgreNous.length; i++) {
          myLayer.addData(MalgreNous[i]);
        }
      }
    else if (!document.forms[0].all.checked) {
      myLayer.clearLayers();
    }
  };


  myLayer.addTo(map);

  </script>
</body>

</html>
